# kerusiko
スマートフォンアプリゲーム「アークナイツ」に登場するケルシー医師の口調を真似するAI。

マルコフ連鎖+GensimDeeplearningを利用し、キーワードからケルシー構文を生成する。

この人AIの肝としては、マルコフ連鎖で生成したテキストが、キーワードに対して適切かを、word2vecを使った分散表現の類似度で評価している点である。

## 背景
私の大好きなスマホアプリゲームに登場する「ケルシー女史」のセリフがあまりにも難しすぎるため、「ケルシー構文」とTwitterで噂されていたのだが、この再現が人力では難しいためアルゴリズムに頼る。


## 特徴
ユーザーが入力したキーワードを元に、ケルシーコーパスから生まれた新しい文が創出される。

- example:
  ```
  >ウルサス
  *****学習中*****
  ====================================
  類似している単語->貴族
  その他の類似単語->['エーギル', '鍵', '黒曜石', '数々', '貴族', '求め', '功績', '残し', '想定', '約', '分']
  ====================================
  ↓↓↓生成された文↓↓↓
  さらに、ここは軍と旧貴族の規則から独立した経済と強大な軍事力が彼らが都市全体の住民に言わせれば、ウルサスはもう少し詳しく説明頂きたいです
  ```

文脈に理性はないが、ウルサス→貴族、などの連想はできている。

また、コーパスに含まれない単語が入力された場合は、その単語に類似かつコーパスに含まれる単語に変換し、文章の生成を行う。

- example:
  ```
  >ケルシー
  *****学習中*****
  ====================================
  類似している単語->チェルノボーグ
  その他の類似単語->['イベント', '死者', '結果', '約', '作戦', '数', 'ため', '屈指', '功績', '人々', 'チェルノボーグ', '鍵']
  ====================================
  ↓↓↓生成された文↓↓↓
  て、サルゴンの国土は、この設備の供給装置が供給するエネルギーのほんの一部でしかなかったのかは関係なくこれは現段階ではレユニオンに関しては極めて重要視して未知のままであるバイカル大公は密かにチェルノボーグを利用し軍の高級将校たが正義感の強い子だったということに、彼は誰も信じるべきではかつて私と関連する二つのエネルギー放出を許可した
  ```

この例の場合でいうと、ケルシー→チェルノボーグという風に変化している。\
生成された文も、チェルノボーグに関連している内容である。


何より、**ケルシーの喋るように長くて、理解しずらい** 点は最も再現できているだろう。\
時折、まともに戻るような単純明快なセリフもあるので、ぜひ沢山試してほしい。

# 開発環境

- spacy: 3.4.4

- ginza: 5.1.1

- ja-ginza: 5.1.0

- gensim: 4.2.0

# 使い方

- タウンロード方法
  - `git clone https://github.com/Yabie-5/kerusiko.git`


- 事前準備
  - kerusikoを使う上で、コーパスの用意が必要。コーパスの生成方法は下記を参照。
      - ※注意: コーパスのfile名は、courpus.txtとし、kerusiko/data/courpus.txt と作成する。

- 実行方法
  - kerusikoディレクトリ上で、
  - `python src/markov_bot.py`を実行することでできる。\
  ランタイムエラーは無視して大丈夫。

  ```
  (.venv)user kerusiko % python src/markov_bot.py
  RuntimeError: module compiled against API version 0xe but this version of numpy is 0xd
  ++++++++++++++++++++++++
  Starting PRTS system ...
  ++++++++++++++++++++++++
  私に何か用事でもあるのか？
  >チェルノボーグ
  *****学習中*****
  ↓↓↓生成された文↓↓↓
  ウルサスの最重要都市の一つとなっても海の脅威が遠ざかることは叶わず、チェルノボーグから提供されることはありません
  ====================================
  類似している単語->都市
  その他の類似単語->['遺物', '求め', '都市', '死者', '想定', 'ため', 'テラ', '数', '結果', '分', '約', '移動', '作戦']
  ====================================
  >

  ...時間だ。仕事に戻るとしよう
  ```


## 応用 (ケルシー医師じゃない人格にする。)

- コーパスに依存して文章を生成している以上、コーパスを変えることでAIの人格を変えることができる。ただし、単にコーパスを別の人格のセリフにしただけでは変更が足りない。word2vecモデルを初期化する必要がある。

- word2vecモデルの初期化方法
  - kerusikoディレクトリ上で、
  - `python src/corpus_w2v.py`を実行することで、初期化できる。\
  ※ このときのコーパスは新たな人格とすること。

# コーパスの作り方

※ケルシー構文のコーパスは著作権上gitなどで公開不可。\
ゲーム「アークナイツ」のシナリオ上でキャラクター「ケルシー」のセリフをコーパスとして使用。

参照元は、
- [ゲームのサイハテ](https://smartgamecap.net/?cat=142&paged=75)様

- [TEREA EXPLORATION](https://www.youtube.com/watch?v=yP91VOoBoJU)からも引用。

どちらも、一文単位で改行されて、txtファイルで保存。


# Author

- Miyagi Ren

  - e205707@ie.u-ryukyu.ac.jp

- Yabiku Takenari

  - e205744@ie.u-ryukyu.ac.jp
